(this["webpackJsonpinitiative-tracker"]=this["webpackJsonpinitiative-tracker"]||[]).push([[0],{23:function(e,t,a){},33:function(e,t,a){e.exports=a(59)},38:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(24),r=a.n(c),l=(a(38),a(61)),o=a(30),u=a(31),s=a(20),d=a(7),m=a(3),v=a(26),b=(a(42),a(4)),f=(a(43),a(27)),E=a.n(f),g=function(e){var t="input_".concat(E()()),a=Object(n.useRef)(null),c=Object(n.useRef)(null),r=Object(n.useRef)(!1);Object(n.useEffect)((function(){r.current?null!==e.value&&void 0!==e.value&&""!==e.value&&0!==e.value||c.current!==document.activeElement&&a.current.classList.remove("control-group--is-active","control-group--has-text"):r.current=!0}));return i.a.createElement("span",{ref:a,className:"control-group"},i.a.createElement("label",{htmlFor:t,className:"label"},e.label),i.a.createElement("input",{ref:c,id:t,className:"input ".concat(e.fullWidth?"input--is-full-width":""),type:e.type||"text",defaultValue:e.defaultValue,value:e.value||("number"!==e.type||e.defaultValue?e.value:""),onChange:e.onChange,onFocus:function(e){e.target.parentElement.classList.add("control-group--is-active")},onBlur:function(e){null!==e.target.value&&void 0!==e.target.value&&""!==e.target.value||!e.target.validity.valid?e.target.parentElement.classList.add("control-group--has-text"):e.target.parentElement.classList.remove("control-group--has-text"),e.target.parentElement.classList.remove("control-group--is-active"),e.target.validity.valid?e.target.parentElement.classList.remove("control-group--invalid"):e.target.parentElement.classList.add("control-group--invalid")}}))},h=(a(23),function(e){return i.a.createElement("button",{className:"button ".concat(e.icon?"button--icon":"","\n        ").concat(e.clicked?"button--is-clicked":"","\n        ").concat(e.secondary?"button--is-secondary":""),onClick:e.onClick,"aria-label":e.ariaLabel},e.children)}),k=(a(55),function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],r=a[1],l=Object(n.useRef)(null),o=Object(n.useRef)((function(e){!(l.current===e.target||l.current.contains(e.target))&&(r(!1),window.removeEventListener("click",o.current,!1))}));return i.a.createElement("div",{ref:l,className:"menu"},i.a.createElement("div",{className:"menu__activator"},i.a.createElement("button",{className:"button ".concat(e.activatorIcon?"button--icon":"","\n            ").concat(c?"button--is-clicked":"","\n            ").concat(e.activatorSecondary?"button--is-secondary":""),onClick:function(e){e.stopPropagation(),c?window.removeEventListener("click",o.current,!1):window.addEventListener("click",o.current,!1),r(!c)}},e.activatorContent)),i.a.createElement("div",{className:"menu__content ".concat(c?"menu__content--active":"")},e.children))}),p=(a(56),function(e){return i.a.createElement("div",{className:"menu-item ".concat(e.clicked?"menu-item--is-clicked":""),onClick:e.onClick},e.children)}),y=(a(57),a(28)),O=a(62),j=a(63),_=function(e){var t=Object(n.useState)(e.name),a=Object(m.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(e.hp),o=Object(m.a)(l,2),u=o[0],s=o[1],d=Object(n.useState)(e.initiative),v=Object(m.a)(d,2),f=v[0],E=v[1],_=Object(n.useState)(e.isGunReady),C=Object(m.a)(_,2),N=C[0],R=C[1],S=Object(n.useState)(!1),w=Object(m.a)(S,2),x=w[0],L=w[1],G=Object(n.useState)(""),I=Object(m.a)(G,2),M=I[0],z=I[1],W=Object(n.useState)(""),D=Object(m.a)(W,2),T=D[0],V=D[1],B=Object(n.useState)(0),F=Object(m.a)(B,2),P=F[0],H=F[1],J=Object(n.useRef)(null),$=Object(O.a)({accept:"InitiativeTrackerEntry",hover:function(t,a){if(J.current){var n=t.index,i=e.index;if(n!==i){var c=J.current.getBoundingClientRect(),r=(c.bottom-c.top)/2,l=a.getClientOffset().y-c.top;n<i&&l<r||n>i&&l>r||(e.onMove(n,i),t.index=i)}}}}),A=Object(m.a)($,2)[1],U=Object(j.a)({item:{type:"InitiativeTrackerEntry",index:e.index,id:e.id},collect:function(e){return{isDragging:e.isDragging()}}}),q=Object(m.a)(U,2),K=q[0].isDragging,Q=q[1],X=function(){x?(r(M),s(T),E(P),L(!x),e.onEditEntry(e.id,M,T,P,e.isGunReady)):(L(!x),z(c),V(u),H(f))},Y=function(){e.onToggleGunReady(e.id),R(!N)},Z=K?.5:1;return Q(A(J)),i.a.createElement("div",{ref:J,className:"initiative-tracker__entry",key:e.id,"data-id":e.id,id:"entry_".concat(e.id),style:{opacity:Z}},i.a.createElement("div",{className:"initiative-tracker__name-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Name"),i.a.createElement("div",null,x?i.a.createElement(g,{fullWidth:!0,type:"text",defaultValue:c,onChange:function(e){return z(e.target.value)}}):c)),i.a.createElement("div",{className:"initiative-tracker__hp-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"HP"),i.a.createElement("div",null,x?i.a.createElement(g,{fullWidth:!0,type:"text",defaultValue:u,onChange:function(e){return V(e.target.value)}}):u)),i.a.createElement("div",{className:"initiative-tracker__initiative-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Initiative"),i.a.createElement("div",null,x?i.a.createElement(g,{fullWidth:!0,type:"number",defaultValue:f,onChange:function(e){return H(Number(e.target.value))}}):N&&e.gunReadinessEnabled?"".concat(f," (+").concat(50,")"):f)),i.a.createElement("div",{className:"initiative-tracker__actions-column"},i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--desktop-only"},e.gunReadinessEnabled?i.a.createElement(h,{icon:!0,secondary:!0,clicked:N,onClick:Y,ariaLabel:"Gun ready"},i.a.createElement(y.a,{size:"1.75em"})):i.a.createElement(i.a.Fragment,null),i.a.createElement(h,{icon:!0,secondary:!0,clicked:x,onClick:X,ariaLabel:"Edit mode"},i.a.createElement(b.d,{size:"1.25em"})),i.a.createElement(h,{icon:!0,secondary:!0,onClick:e.onRemoveEntry.bind(void 0,e.id),ariaLabel:"Remove entry"},i.a.createElement(b.g,{size:"1.25em"}))),i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--mobile-only"},i.a.createElement(k,{activatorIcon:!0,activatorSecondary:!0,activatorContent:i.a.createElement(b.a,{size:"1.25em"})},function(){if(e.gunReadinessEnabled)return i.a.createElement(p,{onClick:Y,clicked:N},"Gun")}(),i.a.createElement(p,{onClick:X,clicked:x},"Edit"),i.a.createElement(p,{onClick:e.onRemoveEntry.bind(void 0,e.id)},"Delete")))))},C=a(29),N=a.n(C),R=function e(t,a,n,i){Object(v.a)(this,e),this.id=void 0,this.name=void 0,this.hp=void 0,this.initiative=void 0,this.isGunReady=void 0,this.editMode=void 0,this.id=t,this.name=a,this.hp=n,this.initiative=i,this.isGunReady=!1,this.editMode=!1},S=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(0),l=Object(m.a)(r,2),o=l[0],u=l[1],s=Object(n.useState)(""),v=Object(m.a)(s,2),f=v[0],E=v[1],y=Object(n.useState)(""),O=Object(m.a)(y,2),j=O[0],C=O[1],S=Object(n.useState)(0),w=Object(m.a)(S,2),x=w[0],L=w[1],G=Object(n.useState)(""),I=Object(m.a)(G,2),M=I[0],z=I[1],W=Object(n.useState)(""),D=Object(m.a)(W,2),T=D[0],V=D[1],B=Object(n.useState)(0),F=Object(m.a)(B,2),P=F[0],H=F[1],J=Object(n.useState)([]),$=Object(m.a)(J,2),A=$[0],U=$[1],q=function(e){U(A.filter((function(t){return t.id!==e})))},K=function(e){var t=Object(d.a)(A),a=t.find((function(t){return t.id===e}));a.editMode?(a.name=M,a.hp=T,a.initiative=P,a.editMode=!a.editMode,U(t)):(a.editMode=!a.editMode,z(a.name),V(a.hp),H(a.initiative))},Q=function(e){var t=Object(d.a)(A),a=t.find((function(t){return t.id===e}));a.isGunReady=!a.isGunReady,U(t)},X=function(e){if(A.length>=2){var t=Object(d.a)(A),a=A.findIndex((function(t){return t.id===e}));if(-1===a)return;if(0===a){var n=t.shift();t.push(n)}else{var i=a-1,c=t.splice(a,1);t.splice(i,0,c[0])}U(t)}},Y=function(e){if(A.length>=2&&A.length>=2){var t=Object(d.a)(A),a=A.findIndex((function(t){return t.id===e}));if(-1===a)return;if(a===A.length-1){var n=t.pop();t.unshift(n)}else{var i=a+1,c=t.splice(i,1);t.splice(a,0,c[0])}U(t)}},Z=Object(n.useCallback)((function(e,t){var a=A[e];U(N()(A,{$splice:[[e,1],[t,0,a]]}))}),[A]);return i.a.createElement("div",{className:"initiative-tracker"},i.a.createElement("div",{className:"initiative-tracker__header"},i.a.createElement("span",{className:"initiative-tracker__header-title"},"Initiative Tracker"),i.a.createElement(h,{icon:!0,ariaLabel:"Turn",onClick:function(){if(A.length>0){var e=Object(d.a)(A),t=e.shift();e.push(t),U(e)}}},i.a.createElement(b.c,{size:"1.25em"})),i.a.createElement(h,{icon:!0,ariaLabel:"Sort",onClick:function(){return U(function(e){return e.length>0?Object(d.a)(e).sort((function(e,t){return t.initiative+(t.isGunReady?50:0)-(e.initiative+(e.isGunReady?50:0))})):e}(A))}},i.a.createElement(b.f,{size:"1.25em"})),i.a.createElement(h,{icon:!0,ariaLabel:"Clear",onClick:function(){return U([])}},i.a.createElement(b.g,{size:"1.25em"})),i.a.createElement(k,{activatorIcon:!0,activatorContent:i.a.createElement(b.b,{size:"1.25em"})},i.a.createElement(p,{onClick:function(){c(!a)},clicked:a},"Call of Cthulhu"))),i.a.createElement("div",{className:"initiative-tracker__body"},A.length>0?i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("div",{className:"initiative-tracker__data"},A.map((function(e,t){return i.a.createElement(_,{key:e.id,id:e.id,index:t,name:e.name,hp:e.hp,initiative:e.initiative,isGunReady:e.isGunReady,gunReadinessEnabled:a,onToggleGunReady:Q,onEditEntry:K,onRemoveEntry:q,onMoveEntryUp:X,onMoveEntryDown:Y,onMove:Z})})))):i.a.createElement("div",{className:"initiative-tracker__no-data"},"No Data")),i.a.createElement("div",{className:"initiative-tracker__footer"},i.a.createElement(g,{label:"Name",type:"text",value:f,onChange:function(e){return E(e.target.value)}}),i.a.createElement(g,{label:"HP",type:"text",value:j,onChange:function(e){return C(e.target.value)}}),i.a.createElement(g,{label:"Initiative",type:"number",value:x,onChange:function(e){return L(Number(e.target.value))}}),i.a.createElement(h,{icon:!0,onClick:function(){if(f&&x){var e=new R(o,f,j,x),t=[].concat(Object(d.a)(A),[e]);U(t),E(""),C(""),L(0),u(o+1)}},ariaLabel:"Add record"},i.a.createElement(b.e,{size:"1.25em"}))))},w={backends:[{backend:o.a},{backend:u.a,preview:!0,transition:s.a}]},x=function(){return i.a.createElement("div",{style:{maxWidth:800,margin:"auto"}},i.a.createElement(l.a,{backend:s.b,options:w},i.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.2d5e68f5.chunk.js.map