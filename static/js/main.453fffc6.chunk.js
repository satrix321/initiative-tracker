(this["webpackJsonpinitiative-tracker"]=this["webpackJsonpinitiative-tracker"]||[]).push([[0],{26:function(e,t,n){},35:function(e,t,n){e.exports=n(61)},40:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(15),r=n.n(c),l=(n(40),n(63)),o=n(32),u=n(33),s=n(24),d=n(8),m=n(3),v=n(28),b=(n(44),n(4)),f=(n(45),n(29)),E=n.n(f),g=function(e){var t="input_".concat(E()()),n=Object(a.useRef)(null),c=Object(a.useRef)(null),r=Object(a.useRef)(!1);Object(a.useEffect)((function(){r.current?null!==e.value&&void 0!==e.value&&""!==e.value&&0!==e.value||c.current!==document.activeElement&&n.current.classList.remove("control-group--is-active","control-group--has-text"):r.current=!0}));return i.a.createElement("span",{ref:n,className:"control-group"},i.a.createElement("label",{htmlFor:t,className:"label"},e.label),i.a.createElement("input",{ref:c,id:t,className:"input ".concat(e.fullWidth?"input--is-full-width":""),type:e.type||"text",defaultValue:e.defaultValue,value:e.value||("number"!==e.type||e.defaultValue?e.value:""),onChange:e.onChange,onFocus:function(e){e.target.parentElement.classList.add("control-group--is-active")},onBlur:function(e){null!==e.target.value&&void 0!==e.target.value&&""!==e.target.value||!e.target.validity.valid?e.target.parentElement.classList.add("control-group--has-text"):e.target.parentElement.classList.remove("control-group--has-text"),e.target.parentElement.classList.remove("control-group--is-active"),e.target.validity.valid?e.target.parentElement.classList.remove("control-group--invalid"):e.target.parentElement.classList.add("control-group--invalid")}}))},h=(n(26),function(e){return i.a.createElement("button",{className:"button ".concat(e.icon?"button--icon":"","\n        ").concat(e.clicked?"button--is-clicked":"","\n        ").concat(e.secondary?"button--is-secondary":"","\n        ").concat(e.disabled?"button--is-disabled":"","\n      "),onClick:e.onClick,"aria-label":e.title,disabled:e.disabled,title:e.title},e.children)}),k=(n(57),function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),c=n[0],r=n[1],l=Object(a.useRef)(null),o=Object(a.useRef)((function(e){!(l.current===e.target||l.current.contains(e.target))&&(r(!1),window.removeEventListener("click",o.current,!1))}));return i.a.createElement("div",{ref:l,className:"menu"},i.a.createElement("div",{className:"menu__activator"},i.a.createElement("button",{className:"button ".concat(e.activatorIcon?"button--icon":"","\n            ").concat(c?"button--is-clicked":"","\n            ").concat(e.activatorSecondary?"button--is-secondary":""),onClick:function(e){e.stopPropagation(),c?window.removeEventListener("click",o.current,!1):window.addEventListener("click",o.current,!1),r(!c)}},e.activatorContent)),i.a.createElement("div",{className:"menu__content ".concat(c?"menu__content--active":"")},e.children))}),p=(n(58),function(e){return i.a.createElement("div",{className:"menu-item ".concat(e.clicked?"menu-item--is-clicked":""),onClick:e.onClick},e.children)}),y=(n(59),n(30)),O=n(64),j=n(65),_=function(e){var t=Object(a.useState)(e.name),n=Object(m.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(e.hp),o=Object(m.a)(l,2),u=o[0],s=o[1],d=Object(a.useState)(e.initiative),v=Object(m.a)(d,2),f=v[0],E=v[1],_=Object(a.useState)(e.isGunReady),C=Object(m.a)(_,2),N=C[0],R=C[1],S=Object(a.useState)(!1),w=Object(m.a)(S,2),x=w[0],G=w[1],I=Object(a.useState)(""),M=Object(m.a)(I,2),L=M[0],z=M[1],W=Object(a.useState)(""),B=Object(m.a)(W,2),D=B[0],T=B[1],V=Object(a.useState)(0),F=Object(m.a)(V,2),P=F[0],H=F[1],J=Object(a.useRef)(null),$=Object(O.a)({accept:"InitiativeTrackerEntry",hover:function(t,n){if(J.current){var a=t.index,i=e.index;if(a!==i){var c=J.current.getBoundingClientRect(),r=(c.bottom-c.top)/2,l=n.getClientOffset().y-c.top;a<i&&l<r||a>i&&l>r||(e.onMove(a,i),t.index=i)}}}}),A=Object(m.a)($,2)[1],U=Object(j.a)({item:{type:"InitiativeTrackerEntry",index:e.index,id:e.id},collect:function(e){return{isDragging:e.isDragging()}}}),q=Object(m.a)(U,2),K=q[0].isDragging,Q=q[1],X=function(){x?(r(L),s(D),E(P),G(!x),e.onEditEntry(e.id,L,D,P,e.isGunReady)):(G(!x),z(c),T(u),H(f))},Y=function(){e.onToggleGunReady(e.id),R(!N)},Z=K?.5:1;return Q(A(J)),i.a.createElement("div",{ref:J,className:"initiative-tracker__entry",key:e.id,"data-id":e.id,id:"entry_".concat(e.id),style:{opacity:Z}},i.a.createElement("div",{className:"initiative-tracker__name-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Name"),i.a.createElement("div",null,x?i.a.createElement(g,{fullWidth:!0,type:"text",defaultValue:c,onChange:function(e){return z(e.target.value)}}):c)),i.a.createElement("div",{className:"initiative-tracker__hp-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"HP"),i.a.createElement("div",null,x?i.a.createElement(g,{fullWidth:!0,type:"text",defaultValue:u,onChange:function(e){return T(e.target.value)}}):u)),i.a.createElement("div",{className:"initiative-tracker__initiative-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Initiative"),i.a.createElement("div",null,x?i.a.createElement(g,{fullWidth:!0,type:"number",defaultValue:f,onChange:function(e){return H(Number(e.target.value))}}):N&&e.gunReadinessEnabled?"".concat(f," (+").concat(50,")"):f)),i.a.createElement("div",{className:"initiative-tracker__actions-column"},i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--desktop-only"},e.gunReadinessEnabled?i.a.createElement(h,{icon:!0,secondary:!0,clicked:N,onClick:Y,title:"Gun ready"},i.a.createElement(y.a,{size:"1.75em"})):i.a.createElement(i.a.Fragment,null),i.a.createElement(h,{icon:!0,secondary:!0,clicked:x,onClick:X,title:"Edit mode"},i.a.createElement(b.d,{size:"1.25em"})),i.a.createElement(h,{icon:!0,secondary:!0,onClick:e.onRemoveEntry.bind(void 0,e.id),title:"Remove entry"},i.a.createElement(b.g,{size:"1.25em"}))),i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--mobile-only"},i.a.createElement(k,{activatorIcon:!0,activatorSecondary:!0,activatorContent:i.a.createElement(b.a,{size:"1.25em"})},function(){if(e.gunReadinessEnabled)return i.a.createElement(p,{onClick:Y,clicked:N},"Gun")}(),i.a.createElement(p,{onClick:X,clicked:x},"Edit"),i.a.createElement(p,{onClick:e.onRemoveEntry.bind(void 0,e.id)},"Delete")))))},C=n(31),N=n.n(C),R=function e(t,n,a,i){Object(v.a)(this,e),this.id=void 0,this.name=void 0,this.hp=void 0,this.initiative=void 0,this.isGunReady=void 0,this.editMode=void 0,this.id=t,this.name=n,this.hp=a,this.initiative=i,this.isGunReady=!1,this.editMode=!1},S=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),l=Object(m.a)(r,2),o=l[0],u=l[1],s=Object(a.useState)(""),v=Object(m.a)(s,2),f=v[0],E=v[1],y=Object(a.useState)(""),O=Object(m.a)(y,2),j=O[0],C=O[1],S=Object(a.useState)(0),w=Object(m.a)(S,2),x=w[0],G=w[1],I=Object(a.useState)(""),M=Object(m.a)(I,2),L=M[0],z=M[1],W=Object(a.useState)(""),B=Object(m.a)(W,2),D=B[0],T=B[1],V=Object(a.useState)(0),F=Object(m.a)(V,2),P=F[0],H=F[1],J=Object(a.useState)([]),$=Object(m.a)(J,2),A=$[0],U=$[1],q=function(e){U(A.filter((function(t){return t.id!==e})))},K=function(e){var t=Object(d.a)(A),n=t.find((function(t){return t.id===e}));n.editMode?(n.name=L,n.hp=D,n.initiative=P,n.editMode=!n.editMode,U(t)):(n.editMode=!n.editMode,z(n.name),T(n.hp),H(n.initiative))},Q=function(e){var t=Object(d.a)(A),n=t.find((function(t){return t.id===e}));n.isGunReady=!n.isGunReady,U(t)},X=function(e){if(A.length>=2){var t=Object(d.a)(A),n=A.findIndex((function(t){return t.id===e}));if(-1===n)return;if(0===n){var a=t.shift();t.push(a)}else{var i=n-1,c=t.splice(n,1);t.splice(i,0,c[0])}U(t)}},Y=function(e){if(A.length>=2&&A.length>=2){var t=Object(d.a)(A),n=A.findIndex((function(t){return t.id===e}));if(-1===n)return;if(n===A.length-1){var a=t.pop();t.unshift(a)}else{var i=n+1,c=t.splice(i,1);t.splice(n,0,c[0])}U(t)}},Z=Object(a.useCallback)((function(e,t){var n=A[e];U(N()(A,{$splice:[[e,1],[t,0,n]]}))}),[A]);return i.a.createElement("div",{className:"initiative-tracker"},i.a.createElement("div",{className:"initiative-tracker__header"},i.a.createElement("span",{className:"initiative-tracker__header-title"},"Initiative Tracker"),i.a.createElement(h,{icon:!0,disabled:A.length<2,title:"Turn",onClick:function(){if(A.length>0){var e=Object(d.a)(A),t=e.shift();e.push(t),U(e)}}},i.a.createElement(b.c,{size:"1.25em"})),i.a.createElement(h,{icon:!0,disabled:0===A.length,title:"Sort",onClick:function(){return U(function(e){return e.length>0?Object(d.a)(e).sort((function(e,t){return t.initiative+(t.isGunReady?50:0)-(e.initiative+(e.isGunReady?50:0))})):e}(A))}},i.a.createElement(b.f,{size:"1.25em"})),i.a.createElement(h,{icon:!0,disabled:0===A.length,title:"Clear",onClick:function(){return U([])}},i.a.createElement(b.g,{size:"1.25em"})),i.a.createElement(k,{activatorIcon:!0,activatorContent:i.a.createElement(b.b,{size:"1.25em"})},i.a.createElement(p,{onClick:function(){c(!n)},clicked:n},"Call of Cthulhu"))),i.a.createElement("div",{className:"initiative-tracker__body"},A.length>0?i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("div",{className:"initiative-tracker__data"},A.map((function(e,t){return i.a.createElement(_,{key:e.id,id:e.id,index:t,name:e.name,hp:e.hp,initiative:e.initiative,isGunReady:e.isGunReady,gunReadinessEnabled:n,onToggleGunReady:Q,onEditEntry:K,onRemoveEntry:q,onMoveEntryUp:X,onMoveEntryDown:Y,onMove:Z})})))):i.a.createElement("div",{className:"initiative-tracker__no-data"},"No Data")),i.a.createElement("div",{className:"initiative-tracker__footer"},i.a.createElement(g,{label:"Name",type:"text",value:f,onChange:function(e){return E(e.target.value)}}),i.a.createElement(g,{label:"HP",type:"text",value:j,onChange:function(e){return C(e.target.value)}}),i.a.createElement(g,{label:"Initiative",type:"number",value:x,onChange:function(e){return G(Number(e.target.value))}}),i.a.createElement(h,{icon:!0,disabled:!Boolean(f)||!Boolean(x),onClick:function(){if(f&&x){var e=new R(o,f,j,x),t=[].concat(Object(d.a)(A),[e]);U(t),E(""),C(""),G(0),u(o+1)}},title:"Add record"},i.a.createElement(b.e,{size:"1.25em"}))))},w={backends:[{backend:o.a},{backend:u.a,preview:!0,transition:s.a}]},x=function(){return i.a.createElement("div",{style:{maxWidth:800,margin:"auto"}},i.a.createElement(l.a,{backend:s.b,options:w},i.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.453fffc6.chunk.js.map