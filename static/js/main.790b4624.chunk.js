(this["webpackJsonpinitiative-tracker"]=this["webpackJsonpinitiative-tracker"]||[]).push([[0],{23:function(e,t,a){},33:function(e,t,a){e.exports=a(59)},38:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(24),r=a.n(c),l=(a(38),a(61)),o=a(30),u=a(31),s=a(20),d=a(7),m=a(3),v=a(26),b=(a(42),a(4)),f=(a(43),a(27)),E=a.n(f),h=function(e){var t="input_".concat(E()()),a=Object(n.useRef)(null),c=Object(n.useRef)(null),r=Object(n.useRef)(!1);Object(n.useEffect)((function(){r.current?null!==e.value&&void 0!==e.value&&""!==e.value&&0!==e.value||c.current!==document.activeElement&&a.current.classList.remove("control-group--is-active","control-group--has-text"):r.current=!0}));return i.a.createElement("span",{ref:a,className:"control-group"},i.a.createElement("label",{htmlFor:t,className:"label"},e.label),i.a.createElement("input",{ref:c,id:t,className:"input ".concat(e.fullWidth?"input--is-full-width":""),type:e.type||"text",defaultValue:e.defaultValue,value:e.value||("number"!==e.type||e.defaultValue?e.value:""),onChange:e.onChange,onFocus:function(e){e.target.parentElement.classList.add("control-group--is-active")},onBlur:function(e){null!==e.target.value&&void 0!==e.target.value&&""!==e.target.value||!e.target.validity.valid?e.target.parentElement.classList.add("control-group--has-text"):e.target.parentElement.classList.remove("control-group--has-text"),e.target.parentElement.classList.remove("control-group--is-active"),e.target.validity.valid?e.target.parentElement.classList.remove("control-group--invalid"):e.target.parentElement.classList.add("control-group--invalid")}}))},p=(a(23),function(e){return i.a.createElement("button",{className:"button ".concat(e.icon?"button--icon":"","\n        ").concat(e.clicked?"button--is-clicked":"","\n        ").concat(e.secondary?"button--is-secondary":""),onClick:e.onClick,"aria-label":e.ariaLabel},e.children)}),g=(a(55),a(28)),k=(a(56),function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],r=a[1];return i.a.createElement("div",{className:"menu"},i.a.createElement("div",{className:"menu__activator"},i.a.createElement("button",{className:"button ".concat(e.activatorIcon?"button--icon":"","\n            ").concat(c?"button--is-clicked":"","\n            ").concat(e.activatorSecondary?"button--is-secondary":""),onClick:function(){return r(!c)}},e.activatorContent)),i.a.createElement("div",{className:"menu__content ".concat(c?"menu__content--active":"")},e.children))}),y=(a(57),function(e){return i.a.createElement("div",{className:"menu-item ".concat(e.clicked?"menu-item--is-clicked":""),onClick:e.onClick},e.children)}),O=a(62),j=a(63),_=function(e){var t=Object(n.useState)(e.name),a=Object(m.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(e.hp),o=Object(m.a)(l,2),u=o[0],s=o[1],d=Object(n.useState)(e.initiative),v=Object(m.a)(d,2),f=v[0],E=v[1],_=Object(n.useState)(e.isGunReady),N=Object(m.a)(_,2),C=N[0],R=N[1],S=Object(n.useState)(!1),x=Object(m.a)(S,2),L=x[0],G=x[1],w=Object(n.useState)(""),M=Object(m.a)(w,2),I=M[0],z=M[1],W=Object(n.useState)(""),D=Object(m.a)(W,2),T=D[0],V=D[1],B=Object(n.useState)(0),F=Object(m.a)(B,2),H=F[0],J=F[1],P=Object(n.useRef)(null),$=Object(O.a)({accept:"InitiativeTrackerEntry",hover:function(t,a){if(P.current){var n=t.index,i=e.index;if(n!==i){var c=P.current.getBoundingClientRect(),r=(c.bottom-c.top)/2,l=a.getClientOffset().y-c.top;n<i&&l<r||n>i&&l>r||(e.onMove(n,i),t.index=i)}}}}),A=Object(m.a)($,2)[1],U=Object(j.a)({item:{type:"InitiativeTrackerEntry",index:e.index,id:e.id},collect:function(e){return{isDragging:e.isDragging()}}}),q=Object(m.a)(U,2),K=function(){L?(r(I),s(T),E(H),G(!L),e.onEditEntry(e.id,I,T,H,e.isGunReady)):(G(!L),z(e.name),V(e.hp),J(e.initiative))},Q=function(){e.onToggleGunReady(e.id),R(!C)},X=q[0].isDragging?.5:1;return(0,q[1])(A(P)),i.a.createElement("div",{ref:P,className:"initiative-tracker__entry",key:e.id,"data-id":e.id,id:"entry_".concat(e.id),style:{opacity:X}},i.a.createElement("div",{className:"initiative-tracker__name-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Name"),i.a.createElement("div",null,L?i.a.createElement(h,{fullWidth:!0,type:"text",defaultValue:c,onChange:function(e){return z(e.target.value)}}):c)),i.a.createElement("div",{className:"initiative-tracker__hp-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"HP"),i.a.createElement("div",null,L?i.a.createElement(h,{fullWidth:!0,type:"text",defaultValue:u,onChange:function(e){return V(e.target.value)}}):u)),i.a.createElement("div",{className:"initiative-tracker__initiative-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Initiative"),i.a.createElement("div",null,L?i.a.createElement(h,{fullWidth:!0,type:"number",defaultValue:f,onChange:function(e){return J(Number(e.target.value))}}):C?"".concat(f," (+").concat(50,")"):f)),i.a.createElement("div",{className:"initiative-tracker__actions-column"},i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--desktop-only"},i.a.createElement(p,{icon:!0,secondary:!0,clicked:C,onClick:Q,ariaLabel:"Gun ready"},i.a.createElement(g.a,{size:"1.75em"})),i.a.createElement(p,{icon:!0,secondary:!0,clicked:L,onClick:K,ariaLabel:"Edit mode"},i.a.createElement(b.c,{size:"1.25em"})),i.a.createElement(p,{icon:!0,secondary:!0,onClick:e.onRemoveEntry.bind(void 0,e.id),ariaLabel:"Remove entry"},i.a.createElement(b.f,{size:"1.25em"}))),i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--mobile-only"},i.a.createElement(k,{activatorIcon:!0,activatorSecondary:!0,activatorContent:i.a.createElement(b.a,{size:"1.25em"})},i.a.createElement(y,{onClick:Q,clicked:C},"Gun"),i.a.createElement(y,{onClick:K,clicked:L},"Edit"),i.a.createElement(y,{onClick:e.onRemoveEntry.bind(void 0,e.id)},"Delete")))))},N=a(29),C=a.n(N),R=function e(t,a,n,i){Object(v.a)(this,e),this.id=void 0,this.name=void 0,this.hp=void 0,this.initiative=void 0,this.isGunReady=void 0,this.editMode=void 0,this.id=t,this.name=a,this.hp=n,this.initiative=i,this.isGunReady=!1,this.editMode=!1},S=function(){var e=Object(n.useState)(0),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),l=Object(m.a)(r,2),o=l[0],u=l[1],s=Object(n.useState)(""),v=Object(m.a)(s,2),f=v[0],E=v[1],g=Object(n.useState)(0),k=Object(m.a)(g,2),y=k[0],O=k[1],j=Object(n.useState)(""),N=Object(m.a)(j,2),S=N[0],x=N[1],L=Object(n.useState)(""),G=Object(m.a)(L,2),w=G[0],M=G[1],I=Object(n.useState)(0),z=Object(m.a)(I,2),W=z[0],D=z[1],T=Object(n.useState)([]),V=Object(m.a)(T,2),B=V[0],F=V[1],H=function(e){F(B.filter((function(t){return t.id!==e})))},J=function(e){var t=Object(d.a)(B),a=t.find((function(t){return t.id===e}));a.editMode?(a.name=S,a.hp=w,a.initiative=W,a.editMode=!a.editMode,F(t)):(a.editMode=!a.editMode,x(a.name),M(a.hp),D(a.initiative))},P=function(e){var t=Object(d.a)(B),a=t.find((function(t){return t.id===e}));a.isGunReady=!a.isGunReady,F(t)},$=function(e){if(B.length>=2){var t=Object(d.a)(B),a=B.findIndex((function(t){return t.id===e}));if(-1===a)return;if(0===a){var n=t.shift();t.push(n)}else{var i=a-1,c=t.splice(a,1);t.splice(i,0,c[0])}F(t)}},A=function(e){if(B.length>=2&&B.length>=2){var t=Object(d.a)(B),a=B.findIndex((function(t){return t.id===e}));if(-1===a)return;if(a===B.length-1){var n=t.pop();t.unshift(n)}else{var i=a+1,c=t.splice(i,1);t.splice(a,0,c[0])}F(t)}},U=Object(n.useCallback)((function(e,t){var a=B[e];F(C()(B,{$splice:[[e,1],[t,0,a]]}))}),[B]);return i.a.createElement("div",{className:"initiative-tracker"},i.a.createElement("div",{className:"initiative-tracker__header"},i.a.createElement("span",{className:"initiative-tracker__header-title"},"Initiative Tracker"),i.a.createElement(p,{icon:!0,ariaLabel:"Turn",onClick:function(){if(B.length>0){var e=Object(d.a)(B),t=e.shift();e.push(t),F(e)}}},i.a.createElement(b.b,{size:"1.25em"})),i.a.createElement(p,{icon:!0,ariaLabel:"Sort",onClick:function(){return F(function(e){return e.length>0?Object(d.a)(e).sort((function(e,t){return t.initiative+(t.isGunReady?50:0)-(e.initiative+(e.isGunReady?50:0))})):e}(B))}},i.a.createElement(b.e,{size:"1.25em"})),i.a.createElement(p,{icon:!0,ariaLabel:"Clear",onClick:function(){return F([])}},i.a.createElement(b.f,{size:"1.25em"}))),i.a.createElement("div",{className:"initiative-tracker__body"},B.length>0?i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("div",{className:"initiative-tracker__data"},B.map((function(e,t){return i.a.createElement(_,{key:e.id,id:e.id,index:t,name:e.name,hp:e.hp,initiative:e.initiative,isGunReady:e.isGunReady,onToggleGunReady:P,onEditEntry:J,onRemoveEntry:H,onMoveEntryUp:$,onMoveEntryDown:A,onMove:U})})))):i.a.createElement("div",{className:"initiative-tracker__no-data"},"No Data")),i.a.createElement("div",{className:"initiative-tracker__footer"},i.a.createElement(h,{label:"Name",type:"text",value:o,onChange:function(e){return u(e.target.value)}}),i.a.createElement(h,{label:"HP",type:"text",value:f,onChange:function(e){return E(e.target.value)}}),i.a.createElement(h,{label:"Initiative",type:"number",value:y,onChange:function(e){return O(Number(e.target.value))}}),i.a.createElement(p,{icon:!0,onClick:function(){if(o&&y){var e=new R(a,o,f,y),t=[].concat(Object(d.a)(B),[e]);F(t),u(""),E(""),O(0),c(a+1)}},ariaLabel:"Add record"},i.a.createElement(b.d,{size:"1.25em"}))))},x={backends:[{backend:o.a},{backend:u.a,preview:!0,transition:s.a}]},L=function(){return i.a.createElement("div",{style:{maxWidth:700,margin:"auto"}},i.a.createElement(l.a,{backend:s.b,options:x},i.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.790b4624.chunk.js.map