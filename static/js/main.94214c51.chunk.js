(this["webpackJsonpinitiative-tracker"]=this["webpackJsonpinitiative-tracker"]||[]).push([[0],{26:function(e,t,n){},35:function(e,t,n){e.exports=n(61)},40:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(15),r=n.n(c),l=(n(40),n(63)),o=n(32),s=n(33),u=n(24),d=n(8),m=n(4),v=n(28),f=(n(44),n(3)),E=(n(45),n(29)),g=n.n(E),b=function(e){var t="input_".concat(g()()),n=Object(a.useRef)(null),c=Object(a.useRef)(null),r=Object(a.useRef)(!1);Object(a.useEffect)((function(){r.current?null!==e.value&&void 0!==e.value&&""!==e.value&&0!==e.value||c.current!==document.activeElement&&n.current.classList.remove("control-group--is-active","control-group--has-text"):r.current=!0}));return i.a.createElement("span",{ref:n,className:"control-group"},i.a.createElement("label",{htmlFor:t,className:"label"},e.label),i.a.createElement("input",{ref:c,id:t,className:"input ".concat(e.fullWidth?"input--is-full-width":""),type:e.type||"text",defaultValue:e.defaultValue,value:e.value||("number"!==e.type||e.defaultValue?e.value:""),onChange:e.onChange,onFocus:function(e){e.target.parentElement.classList.add("control-group--is-active")},onBlur:function(e){null!==e.target.value&&void 0!==e.target.value&&""!==e.target.value||!e.target.validity.valid?e.target.parentElement.classList.add("control-group--has-text"):e.target.parentElement.classList.remove("control-group--has-text"),e.target.parentElement.classList.remove("control-group--is-active"),e.target.validity.valid?e.target.parentElement.classList.remove("control-group--invalid"):e.target.parentElement.classList.add("control-group--invalid")}}))},k=(n(26),function(e){return i.a.createElement("button",{className:"button ".concat(e.icon?"button--icon":"","\n        ").concat(e.clicked?"button--is-clicked":"","\n        ").concat(e.secondary?"button--is-secondary":"","\n        ").concat(e.disabled?"button--is-disabled":"","\n      "),onClick:e.onClick,"aria-label":e.title,disabled:e.disabled,title:e.title},e.children)}),h=(n(57),function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),c=n[0],r=n[1],l=Object(a.useRef)(null),o=Object(a.useRef)((function(e){!(l.current===e.target||l.current.contains(e.target))&&(r(!1),window.removeEventListener("click",o.current,!1))}));return i.a.createElement("div",{ref:l,className:"menu"},i.a.createElement("div",{className:"menu__activator"},i.a.createElement("button",{className:"button ".concat(e.activatorIcon?"button--icon":"","\n            ").concat(c?"button--is-clicked":"","\n            ").concat(e.activatorSecondary?"button--is-secondary":""),onClick:function(e){e.stopPropagation(),c?window.removeEventListener("click",o.current,!1):window.addEventListener("click",o.current,!1),r(!c)}},e.activatorContent)),i.a.createElement("div",{className:"menu__content ".concat(c?"menu__content--active":"")},e.children))}),y=(n(58),function(e){return i.a.createElement("div",{className:"menu-item ".concat(e.clicked?"menu-item--is-clicked":""),onClick:e.onClick},e.children)}),p=(n(59),n(30)),O=n(64),w=n(65),N=function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(e.name),o=Object(m.a)(l,2),s=o[0],u=o[1],d=Object(a.useState)(e.hp),v=Object(m.a)(d,2),E=v[0],g=v[1],N=Object(a.useState)(e.initiative),_=Object(m.a)(N,2),j=_[0],S=_[1],C=Object(a.useRef)(null),I=Object(O.a)({accept:"InitiativeTrackerEntry",hover:function(t,n){if(C.current){var a=t.index,i=e.index;if(a!==i){var c=C.current.getBoundingClientRect(),r=(c.bottom-c.top)/2,l=n.getClientOffset().y-c.top;a<i&&l<r||a>i&&l>r||(e.onMove(a,i),t.index=i)}}}}),R=Object(m.a)(I,2)[1],x=Object(w.a)({item:{type:"InitiativeTrackerEntry",index:e.index,id:e.id},collect:function(e){return{isDragging:e.isDragging()}}}),G=Object(m.a)(x,2),J=G[0].isDragging,L=G[1],z=function(){c?(r(!c),e.onEditEntry(e.id,s,E,j)):r(!c)},W=function(){e.onToggleGunReady(e.id)},B=J?.5:1;return L(R(C)),i.a.createElement("div",{ref:C,className:"initiative-tracker__entry",key:e.id,"data-id":e.id,id:"entry_".concat(e.id),style:{opacity:B}},i.a.createElement("div",{className:"initiative-tracker__name-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Name"),i.a.createElement("div",null,c?i.a.createElement(b,{fullWidth:!0,type:"text",defaultValue:e.name,onChange:function(e){return u(e.target.value)}}):e.name)),i.a.createElement("div",{className:"initiative-tracker__hp-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"HP"),i.a.createElement("div",null,c?i.a.createElement(b,{fullWidth:!0,type:"text",defaultValue:e.hp,onChange:function(e){return g(e.target.value)}}):e.hp)),i.a.createElement("div",{className:"initiative-tracker__initiative-column"},i.a.createElement("div",{className:"initiative-tracker__column-label"},"Initiative"),i.a.createElement("div",null,c?i.a.createElement(b,{fullWidth:!0,type:"number",defaultValue:e.initiative,onChange:function(e){return S(Number(e.target.value))}}):e.isGunReady&&e.gunReadinessEnabled?"".concat(e.initiative," (+").concat(50,")"):e.initiative)),i.a.createElement("div",{className:"initiative-tracker__actions-column"},i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--desktop-only"},e.gunReadinessEnabled?i.a.createElement(k,{icon:!0,secondary:!0,clicked:e.isGunReady,onClick:W,title:"Gun ready"},i.a.createElement(p.a,{size:"1.75em"})):i.a.createElement(i.a.Fragment,null),i.a.createElement(k,{icon:!0,secondary:!0,clicked:c,onClick:z,title:"Edit mode"},i.a.createElement(f.d,{size:"1.25em"})),i.a.createElement(k,{icon:!0,secondary:!0,onClick:e.onRemoveEntry.bind(void 0,e.id),title:"Remove entry"},i.a.createElement(f.g,{size:"1.25em"}))),i.a.createElement("div",{className:"initiative-tracker__actions-container initiative-tracker__actions-container--mobile-only"},i.a.createElement(h,{activatorIcon:!0,activatorSecondary:!0,activatorContent:i.a.createElement(f.a,{size:"1.25em"})},function(){if(e.gunReadinessEnabled)return i.a.createElement(y,{onClick:W,clicked:e.isGunReady},"Gun")}(),i.a.createElement(y,{onClick:z,clicked:c},"Edit"),i.a.createElement(y,{onClick:e.onRemoveEntry.bind(void 0,e.id)},"Delete")))))},_=n(31),j=n.n(_),S=function e(t,n,a,i){Object(v.a)(this,e),this.id=void 0,this.name=void 0,this.hp=void 0,this.initiative=void 0,this.isGunReady=void 0,this.id=t,this.name=n,this.hp=a,this.initiative=i,this.isGunReady=!1},C=function(){var e=[],t=0,n=window.localStorage.getItem("trackerEntries");n&&(e=JSON.parse(n));var c=window.localStorage.getItem("trackerIdCounter");c&&(t=Number(c));var r=Object(a.useState)(!1),l=Object(m.a)(r,2),o=l[0],s=l[1],u=Object(a.useState)(t),v=Object(m.a)(u,2),E=v[0],g=v[1],p=Object(a.useState)(""),O=Object(m.a)(p,2),w=O[0],_=O[1],C=Object(a.useState)(""),I=Object(m.a)(C,2),R=I[0],x=I[1],G=Object(a.useState)(0),J=Object(m.a)(G,2),L=J[0],z=J[1],W=Object(a.useState)(e),B=Object(m.a)(W,2),D=B[0],T=B[1],V=function(e){var t=D.filter((function(t){return t.id!==e}));T(t),window.localStorage.setItem("trackerEntries",JSON.stringify(t))},M=function(e,t,n,a){var i=Object(d.a)(D),c=i.find((function(t){return t.id===e}));c&&(c.name=t,c.hp=n,c.initiative=a,T(i),window.localStorage.setItem("trackerEntries",JSON.stringify(i)))},F=function(e){var t=Object(d.a)(D),n=t.find((function(t){return t.id===e}));n.isGunReady=!n.isGunReady,T(t),window.localStorage.setItem("trackerEntries",JSON.stringify(t))},P=function(e){if(D.length>=2){var t=Object(d.a)(D),n=D.findIndex((function(t){return t.id===e}));if(-1===n)return;if(0===n){var a=t.shift();t.push(a)}else{var i=n-1,c=t.splice(n,1);t.splice(i,0,c[0])}T(t),window.localStorage.setItem("trackerEntries",JSON.stringify(t))}},H=function(e){if(D.length>=2&&D.length>=2){var t=Object(d.a)(D),n=D.findIndex((function(t){return t.id===e}));if(-1===n)return;if(n===D.length-1){var a=t.pop();t.unshift(a)}else{var i=n+1,c=t.splice(i,1);t.splice(n,0,c[0])}T(t),window.localStorage.setItem("trackerEntries",JSON.stringify(t))}},$=Object(a.useCallback)((function(e,t){var n=D[e],a=j()(D,{$splice:[[e,1],[t,0,n]]});T(a),window.localStorage.setItem("trackerEntries",JSON.stringify(a))}),[D]);return i.a.createElement("div",{className:"initiative-tracker"},i.a.createElement("div",{className:"initiative-tracker__header"},i.a.createElement("span",{className:"initiative-tracker__header-title"},"Initiative Tracker"),i.a.createElement(k,{icon:!0,disabled:D.length<2,title:"Turn",onClick:function(){if(D.length>0){var e=Object(d.a)(D),t=e.shift();e.push(t),T(e),window.localStorage.setItem("trackerEntries",JSON.stringify(e))}}},i.a.createElement(f.c,{size:"1.25em"})),i.a.createElement(k,{icon:!0,disabled:0===D.length,title:"Sort",onClick:function(){var e=function(e){return e.length>0?Object(d.a)(e).sort((function(e,t){return t.initiative+(t.isGunReady?50:0)-(e.initiative+(e.isGunReady?50:0))})):e}(D);T(e),window.localStorage.setItem("trackerEntries",JSON.stringify(e))}},i.a.createElement(f.f,{size:"1.25em"})),i.a.createElement(k,{icon:!0,disabled:0===D.length,title:"Clear",onClick:function(){T([]),g(0),window.localStorage.setItem("trackerEntries",JSON.stringify([])),window.localStorage.setItem("trackerIdCounter",JSON.stringify(0))}},i.a.createElement(f.g,{size:"1.25em"})),i.a.createElement(h,{activatorIcon:!0,activatorContent:i.a.createElement(f.b,{size:"1.25em"})},i.a.createElement(y,{onClick:function(){s(!o)},clicked:o},"Call of Cthulhu"))),i.a.createElement("div",{className:"initiative-tracker__body"},D.length>0?i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("div",{className:"initiative-tracker__data"},D.map((function(e,t){return i.a.createElement(N,{key:e.id,id:e.id,index:t,name:e.name,hp:e.hp,initiative:e.initiative,isGunReady:e.isGunReady,gunReadinessEnabled:o,onToggleGunReady:F,onEditEntry:M,onRemoveEntry:V,onMoveEntryUp:P,onMoveEntryDown:H,onMove:$})})))):i.a.createElement("div",{className:"initiative-tracker__no-data"},"No Data")),i.a.createElement("div",{className:"initiative-tracker__footer"},i.a.createElement(b,{label:"Name",type:"text",value:w,onChange:function(e){return _(e.target.value)}}),i.a.createElement(b,{label:"HP",type:"text",value:R,onChange:function(e){return x(e.target.value)}}),i.a.createElement(b,{label:"Initiative",type:"number",value:L,onChange:function(e){return z(Number(e.target.value))}}),i.a.createElement(k,{icon:!0,disabled:!Boolean(w)||!Boolean(L),onClick:function(){if(w&&L){var e=new S(E,w,R,L),t=[].concat(Object(d.a)(D),[e]);T(t),window.localStorage.setItem("trackerEntries",JSON.stringify(t)),_(""),x(""),z(0),g(E+1),window.localStorage.setItem("trackerIdCounter",String(E+1))}},title:"Add record"},i.a.createElement(f.e,{size:"1.25em"}))))},I={backends:[{backend:o.a},{backend:s.a,preview:!0,transition:u.a}]},R=function(){return i.a.createElement("div",{style:{maxWidth:800,margin:"auto"}},i.a.createElement(l.a,{backend:u.b,options:I},i.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.94214c51.chunk.js.map